"use strict";const e=require("../common/vendor.js"),$=require("../api/api.js"),j=require("../state/readHistory.js"),m=e.b({__name:"read",setup(_){const i=e.T(),o=e.E(),d=j.u(),a=e.l(()=>{var u,r;return{id:(u=o.query)==null?void 0:u.id,page:(r=o.query)==null?void 0:r.page}}),l=e.r({}),f=e.l(()=>{const u=[];if(l.value)for(let r=1;r<=l.value.totalPageSize;r++)u.push(r);return u}),s=e.r(!1),n=e.r(!1),v=e.r(!1);g(a.value.id,a.value.page);function g(u,r){u===void 0||r===void 0||r==""||(d.setReadPage(u,r),s.value=!0,$.c(u,r).then(t=>{l.value=t,s.value=!1,e.i.setNavigationBarTitle({title:t.articleName})}))}e.m(()=>a.value,u=>{g(u.id,u.page)});function p(){a.value.id===void 0||a.value.page===void 0||a.value.page<1||i.replace(`/pages/read?id=${a.value.id}&page=${parseInt(a.value.page)-1}`)}function c(){a.value.id===void 0||a.value.page===void 0||a.value.page!=l.value.totalPageSize&&i.replace(`/pages/read?id=${a.value.id}&page=${parseInt(a.value.page)+1}`)}return(u,r)=>e.k({a:e.u(a).page>0},e.u(a).page>0?{b:e.t(e.u(a).page)}:{},{c:e.t(l.value.content),d:e.j(p),e:e.n(e.u(a).page==0?"text-gray":""),f:e.j(t=>n.value=!0),g:e.j(c),h:e.n(e.u(a).page==l.value.totalPageSize?"text-gray":""),i:e.j(()=>{}),j:e.j(t=>v.value=!v.value),k:n.value},n.value?{l:e.t(l.value.articleName),m:e.j(t=>e.u(i).replace(`/pages/read?id=${e.u(a).id}&page=0`)),n:e.n(e.u(a).page==0?"text-blue":""),o:e.h(e.u(f),(t,x,h)=>({a:e.t(t),b:t==e.u(a).page?"actived-page":"",c:e.j(y=>e.u(i).replace(`/pages/read?id=${e.u(a).id}&page=${t}`),t),d:e.n(t==e.u(a).page?"text-blue":""),e:t})),p:e.j(t=>n.value=!1),q:v.value?"calc(100vh - 14rem)":"100vh",r:v.value?"8rem":"0"}:{},{s:v.value},v.value?{t:e.j(t=>e.u(i).replaceAll("/pages/books")),v:e.t(l.value.articleName),w:e.t(e.u(a).page)}:{},{x:v.value},v.value?{y:e.j(p),z:e.n(e.u(a).page==0?"text-gray":""),A:e.j(t=>n.value=!0),B:e.j(c),C:e.n(e.u(a).page==l.value.totalPageSize?"text-gray":"")}:{})}});wx.createPage(m);
